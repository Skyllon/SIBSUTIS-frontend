<div class="shopping-list">
  <h1>Список покупок</h1>

  <div class="stats">
    <div class="stat-item">
      <span class="stat-label">Всего:</span>
      <span class="stat-value">{{ stats.total }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Куплено:</span>
      <span class="stat-value">{{ stats.purchased }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Не куплено:</span>
      <span class="stat-value">{{ stats.notPurchased }}</span>
    </div>
  </div>

  <app-add-item-form (itemAdded)="addItem($event)"></app-add-item-form>

  <div class="search-sort-container">
    <div class="search-group">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
        placeholder="Поиск по названию..."
        class="search-input"
      >
    </div>
    <div class="sort-group">
      <select [(ngModel)]="sortBy" (change)="onSortChange()" class="sort-select">
        <option value="name">Сортировка по имени</option>
        <option value="status">Сортировка по статусу</option>
        <option value="category">Сортировка по категории</option>
      </select>
    </div>
  </div>

  <div class="filter-buttons">
    <button [class.active]="filter === 'all'" (click)="setFilter('all')">
      Все
    </button>
    <button [class.active]="filter === 'notPurchased'" (click)="setFilter('notPurchased')">
      Не куплено
    </button>
    <button [class.active]="filter === 'purchased'" (click)="setFilter('purchased')">
      Куплено
    </button>
  </div>

  <div class="items-container">
    <app-shopping-item
      *ngFor="let item of filteredItems"
      [item]="item"
      (remove)="removeItem($event)"
      (togglePurchased)="togglePurchased($event)"
      (editItem)="editItem($event)">
    </app-shopping-item>
  </div>

  <div *ngIf="filteredItems.length === 0" class="empty-message">
    {{ searchTerm ? 'Ничего не найдено' : 'Список покупок пуст' }}
  </div>
</div>
